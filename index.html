<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="A Simple mobile-friendly weather dashboard. Made with OpenWeather Api.">

  <link rel="stylesheet" type="text/css" href="/style.css">
  <link rel="manifest" href="/manifest.json">
  <link rel="shortcut icon" href="/images/icons/favicon.ico">
  <script async defer data-domain="m-gdev.github.io/weather-dashboard" src="https://analytics.connectwithmusa.com/js/plausible.js"></script>



  <title>Weather Dashboard</title>
</head>

<body>
 
	<div class="nav-hamburger-wrap">
    <button class="nav-hamburger" onclick="toggleNav()"><img src="/images/hamburger.svg" width="20rem" height="20rem"></button>
    </div>
  
      <nav>
          <ul class="base-flexbox nav" id="nav">
              <li><a href="/pages/dashboard/"><img src="/images/icons/android-chrome-192x192.png" width="50px" height="50px"></a></li>
              <li class="nav-item"><a href="/pages/about.html">About</a></li>
              <li><button class="nav-button popcity"><a href="/pages/popularcities.html">Popular Cities</a></button></li>
              <li><button class="nav-button chgcity"><a href="#">Change City</a></button></li>
          </ul>
      </nav>



<div class="content">

  <h1 id="home-greeting">Welcome! ðŸ‘‹ Please enter your city:</h1>
  <input id="search" placeholder="Search Now" type="text" autocomplete="off" autofocus required>

  <h4 class="unit-heading">Choose type of units</h4>

  <div class="unit-buttons">
    <button onclick="setUnits('metric')">Metric</button>
    <button onclick="setUnits('farenheit')">Farenheit</button>
    <button onclick="setUnits('standard')">Standard</button>
  </div>

  <p>(metric is default)</p>

</div>





</body>

<script>
// if enter key is pressed do:
document.getElementById('search').onkeydown = function(e){
   if(e.keyCode == 13){
// get value of input and assign it to city var
     let city = document.getElementById('search').value;
     // If city input is empty do not navigate to dashboard
     if (city === "") {
       alert("Please enter a City.");
      }
     else {
    // store city var in local storage
        localStorage.setItem("city", `${city}`);
        console.log(localStorage.getItem("city"));
    // navigate to dashboard page
        document.location.href = "/pages/dashboard/";
     }
   }
};

function setUnits(units) {
  localStorage.setItem("units", units);
  alert(`Set ${units} as default unit.`);
  
}

// Function to toggle nav, invoked by hamburger button
function toggleNav() {
    let x = document.getElementById('nav');
    if ( window.getComputedStyle(x).getPropertyValue("display") === 'none') {
        x.style.display = 'flex';
    } else {
        x.style.display = 'none';
    }
  }

</script>

</html>

